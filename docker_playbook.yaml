---
- name: docker purpose
  hosts: docker_slaves
  become: yes
  become_method: sudo
  become_user: root
  tasks:
    - name: to login to aws ecr
      shell: $(aws ecr get-login --no-include-email)

    - name: pull docker image
      shell: docker pull 335116981063.dkr.ecr.ap-south-1.amazonaws.com/app1:latest

    - name: to start docker con
      shell: docker run --name con1 -itd -p 8080:8080 335116981063.dkr.ecr.ap-south-1.amazonaws.com/app1:1
